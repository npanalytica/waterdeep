<mat-spinner
	*ngIf="!(character$ | async)"
	class="center"
	mode="indeterminate">
</mat-spinner>

<ng-container *ngIf="(character$ | async) as character">

	<character-header [character]="character" active="sheet"></character-header>

	<hp-bar [character]="character" (onChange)="update(character)"></hp-bar>
	
	<div id="basic-stats">
		<div class="stat">
			<span class="value">{{ character.ac }}</span>
			<span class="text">AC</span>
		</div>
		<div class="stat">
			<span class="value">{{ character.initiative }}</span>
			<span class="text">Initiative</span>
		</div>
		<div class="stat">
			<span class="value">{{ character.speed }}</span>
			<span class="text">Speed</span>
		</div>
	</div>

	<div class="section-header">Stats</div>
	<div class="proficiency" [ngClass]="{'odd': odd}"
		*ngFor="let stat of mainStats; let odd = odd">
		<span class="icon"
			[ngClass]="{'proficient': character.saves.indexOf(stat + '_save') !== -1 }">
			<img src="assets/icons/stats/{{ stat }}.png"/>
		</span>
		<span class="name">{{ stat | fromUnderscore }}</span>
		<span class="bonus">{{ character[stat] | formatBonus }}</span>
		<span class="bonus save">{{ character[stat + '_save'] | formatBonus }}</span>
	</div>

	
	<div class="section-header">Proficiencies</div>
	<div class="proficiency" [ngClass]="{'odd': odd}"
		*ngFor="let proficiency of proficiencies; let odd = odd">
		<span class="icon"
			[ngClass]="{'proficient': character.proficiencies.indexOf(proficiency.name) !== -1 }">
			<img src="assets/icons/stats/{{ proficiency.name }}.png"/>
		</span>
		<span class="name">{{ proficiency.name | fromUnderscore }}</span>
		<span class="bonus">{{ character[proficiency.name] | formatBonus }}</span>
	</div>

</ng-container>